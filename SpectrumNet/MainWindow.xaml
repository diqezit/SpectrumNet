<Window x:Class="SpectrumNet.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sk="clr-namespace:SkiaSharp.Views.WPF;assembly=SkiaSharp.Views.WPF"
        xmlns:local="clr-namespace:SpectrumNet"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:wf="clr-namespace:System.Windows.Forms;assembly=System.Windows.Forms"
        Title="Spectrum Analyser"
        Height="600" Width="800"
        MinHeight="600" MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="Transparent"
        AllowsTransparency="True"
        WindowStyle="None"
        ResizeMode="CanResize"
        StateChanged="OnStateChanged"
        MouseDoubleClick="OnWindowMouseDoubleClick">

    <Window.Resources>
        <Duration x:Key="StandardAnimationDuration">0:0:0.3</Duration>
        <CubicEase x:Key="StandardEaseOut" EasingMode="EaseOut"/>
        <Style TargetType="ScrollBar" BasedOn="{StaticResource ModernScrollBarStyle}"/>
        <Style TargetType="Thumb" BasedOn="{StaticResource ScrollBarThumbStyle}"/>
    </Window.Resources>

    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome 
            CaptionHeight="0"
            CornerRadius="0"
            GlassFrameThickness="0"
            ResizeBorderThickness="6"/>
    </shell:WindowChrome.WindowChrome>

    <Border 
        Background="{DynamicResource WindowBackgroundBrush}"
        BorderBrush="{DynamicResource WindowBorderBrush}"
        BorderThickness="1"
        CornerRadius="12">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border 
                Grid.Row="0"
                Style="{DynamicResource TitleBarBorderStyle}"
                Height="50"
                CornerRadius="12,12,0,0"
                MouseLeftButtonDown="OnWindowDrag">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <TextBlock 
                        Grid.Column="0"
                        Text="Spectrum Analyser"
                        Margin="24,0,0,0"
                        FontSize="20"
                        FontWeight="Bold"
                        Foreground="White"
                        VerticalAlignment="Center"/>

                    <StackPanel 
                        Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,0,12,0">
                        <ToggleButton 
                            x:Name="ThemeToggleButton"
                            Style="{DynamicResource ToggleSwitchStyle}"
                            Width="100"
                            Margin="0,0,20,0"
                            Checked="OnThemeToggleButtonChanged"
                            Unchecked="OnThemeToggleButtonChanged"/>

                        <Button 
                            x:Name="OpenControlPanelButton"
                            Style="{DynamicResource WindowControlButtonStyle}"
                            Margin="0,0,10,0"
                            Click="OnButtonClick">
                            <Path 
                                Data="M4,4 L16,4 L16,8 L4,8 M4,12 L16,12 L16,16 L4,16"
                                Stroke="White"
                                StrokeThickness="2"/>
                        </Button>

                        <Button 
                            x:Name="MinimizeButton"
                            Style="{DynamicResource WindowControlButtonStyle}"
                            Click="OnButtonClick">
                            <Path 
                                Data="M0,10 H20"
                                Stroke="White"
                                StrokeThickness="2"/>
                        </Button>

                        <Button 
                            x:Name="MaximizeButton"
                            Style="{DynamicResource WindowControlButtonStyle}"
                            Click="OnButtonClick">
                            <Path 
                                x:Name="MaximizeIcon"
                                Data="M2,2 H18 V18 H2 Z"
                                Stroke="White"
                                StrokeThickness="2"
                                Fill="Transparent"/>
                        </Button>

                        <Button 
                            x:Name="CloseButton"
                            Style="{DynamicResource WindowCloseButtonStyle}"
                            Click="OnButtonClick">
                            <Path 
                                Data="M4,4 L16,16 M16,4 L4,16"
                                Stroke="White"
                                StrokeThickness="2"/>
                        </Button>
                    </StackPanel>
                </Grid>
            </Border>

            <Grid 
                Grid.Row="1"
                Margin="24">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Border 
                    Grid.Row="0"
                    x:Name="SpectrumContainer"
                    Background="{DynamicResource SurfaceBrush}"
                    CornerRadius="16"
                    Margin="0,0,0,10">
                    <sk:SKElement 
                        x:Name="spectrumCanvas"
                        Margin="16"
                        Opacity="1"
                        PaintSurface="OnPaintSurface"/>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>